selectedfile: File | undefined;

getattech(event: any) {
  this.selectedfile = event.target.files?.[0]; // Optional chaining for safety
}

crlession() {
  if (!this.selectedfile) {
    // Handle the case where selectedfile is undefined
    return;
  }

  const filedata = new FormData();
  filedata.append('image', this.selectedfile, this.selectedfile.name); // Accessing name directly

  this.lessonsArray.forEach((lesson, index) => {
    const apiUrl = this.apiurl + '/CRlession/Approve';
    const requestBody = {
      "flag": "I",
      "crLessonID": 0,
      "itcrid": this.crid.itcrid,
      "lessons": lesson.text,
      "lessonDt": this.lessonDt,
      "attachment": this.selectedfile,
      "createdBy": this.supportid,
      "createdDt": this.today,
      "modifiedBy": this.supportid,
      "modifiedDt": this.today
    };

    const httpOptions = {
      headers: new HttpHeaders({
        'Content-Type': 'application/json'
      })
    };

    // Rest of your code
  });
}

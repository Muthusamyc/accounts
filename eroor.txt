import { HttpClient, HttpHeaders } from '@angular/common/http';

// Other code...

constructor(private http: HttpClient) {}

viewemail(status: any) {
  // Your existing code...

  this.http.get('assets/email.html', { responseType: 'text' }).subscribe(
    (output: string) => {
      // Read HTML file asynchronously
      console.log(output);
      this.sendemailfrom(output, status);
    },
    (error: any) => {
      console.error('Failed to read HTML file:', error);
      // Handle error accordingly
    }
  );
}

sendemailfrom(output: string, status: any) {
  // Your existing code...

  const requestBody = {
    "to": to,
    "cc": cc,
    "subject": `Unnati:IT Change Request:${response[0].itcrid} : Submitted for Approval`,
    "body": output
  };

  const httpOptions = {
    headers: new HttpHeaders({
      'Content-Type': 'text/html' // Set content type to text/html
    })
  };

  // Send email
  this.http.post(apiUrl, requestBody, httpOptions).subscribe(
    (response: any) => {
      console.log(response);
    },
    (error: any) => {
      console.log('Post request failed', error);
    }
  );
}
